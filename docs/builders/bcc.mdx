---
description: |
  The `baiducloud-bcc` Packer builder plugin provide the capability to build
  customized images based on an existing base images.
page_title: Baiducloud Image Builder
nav_title: Baiducloud BCC
---

# Baiducloud Image Builder

Type: `Baiducloud-bcc`
Artifact BuilderId: `baidu.baiducloud`

The `baiducloud-bcc` Packer builder plugin provide the capability to build
customized images based on an existing base images.

## Configuration Reference

The following configuration options are available for building baidu cloud images.

### Required:

@include 'builder/bcc/BaiduCloudAccessConfig-required.mdx'

@include 'builder/bcc/BaiduCloudRunConfig-required.mdx'

@include 'builder/bcc/BaiduCloudImageConfig-required.mdx'

### Optional:

@include 'builder/bcc/BaiduCloudAccessConfig-not-required.mdx'

@include 'builder/bcc/BaiduCloudRunConfig-not-required.mdx'

@include 'builder/bcc/BaiduCloudImageConfig-not-required.mdx'

### Communicator Configuration

In addition to the above options, a communicator can be configured
for this builder.

#### Optional:

@include 'packer-plugin-sdk/communicator/Config-not-required.mdx'

@include 'packer-plugin-sdk/communicator/SSH-not-required.mdx'

@include 'packer-plugin-sdk/communicator/SSHTemporaryKeyPair-not-required.mdx'

@include 'packer-plugin-sdk/communicator/SSH-Key-Pair-Name-not-required.mdx'

@include 'packer-plugin-sdk/communicator/SSH-Private-Key-File-not-required.mdx'

@include 'packer-plugin-sdk/communicator/SSH-Agent-Auth-not-required.mdx'

## Basic Example

Here is a basic example for Baiducloud using the officially recommended HCL2 format.

<Tab heading="HCL2">

```hcl
variable "access_key" {
  type    = string
  default = "${env("BAIDUCLOUD_ACCESS_KEY")}"
}

variable "secret_key" {
  type    = string
  default = "${env("BAIDUCLOUD_SECRET_KEY")}"
}

source "baiducloud-bcc" "example-1" {
  access_key      = "${var.access_key}"
  secret_key      = "${var.secret_key}"
  region          = "fwh"
  zone            = "cn-fwh-a"
  source_image_id = "m-sDghxZu1"
  instance_spec   = "bcc.ic4.c2m2"
  image_name      = "packer-test"
  associate_public_ip_address = true 
  use_default_network         = true 
  ssh_username                = "root"
  run_tags                    = {
    Managed_by = "Packer"
    Built_by   = "Packer"
  }
} 

build {
  sources = ["source.baiducloud-bcc.example-1"]
  
  provisioner "shell" {
    inline = [
      "Sleep 30",
      "yum install redis.x86_64 -y",
    ]
  }
}
```

</Tab>

If you have set `BAIDUCLOUD_ACCESS_KEY` and `BAIDUCLOUD_SECRET_KEY` environment variables,
You can also not set `access_key` and `secret_key` fields, 
because the plug-in can automatically read environment variables.

The example is blow.

<Tab heading="HCL2">

```hcl
source "baiducloud-bcc" "example-1" {
  region          = "fwh"
  zone            = "cn-fwh-a"
  source_image_id = "m-sDghxZu1"
  instance_spec   = "bcc.ic4.c2m2"
  image_name      = "packer-test"
  associate_public_ip_address = true 
  use_default_network         = true 
  ssh_username                = "root"
  run_tags                    = {
    Managed_by = "Packer"
    Built_by   = "Packer"
  }
} 

build {
  sources = ["source.baiducloud-bcc.example-1"]
  
  provisioner "shell" {
    inline = [
      "Sleep 30",
      "yum install redis.x86_64 -y",
    ]
  }
}
```

</Tab>

You can also use the JSON format configuration file, although it is being deprecated.

Here is a basic example for Baiducloud using JSON format.

<Tab heading="JSON">

```json
{
  "variables": {
    "access_key": "{{env `BAIDUCLOUD_ACCESS_KEY`}}",
    "secret_key": "{{env `BAIDUCLOUD_SECRET_KEY`}}"
  },
  "builders": [
    {
      "type": "baiducloud-bcc",
      "access_key": "{{user `access_key`}}",
      "secret_key": "{{user `secret_key`}}",
      "region": "fwh",
      "zone": "cn-fwh-a",
      "source_image_id": "m-sDghxZu1",
      "instance_spec": "bcc.ic4.c2m2",
      "image_name": "packer-test",
      "associate_public_ip_address": true,
      "use_default_network": true,
      "ssh_username": "root",
      "run_tags": {
        "Managed_by": "Packer",
        "Built_by": "Packer"
      }
    }
  ],
  "provisioners": [
    {
      "type": "shell",
      "inline": ["sleep 30", "yum install redis.x86_64 -y"]
    }
  ]
}
```

</Tab>

~> Note: Images can become deprecated after a while; please go to bce console to find one that exists.

~> Note: The current version does not support Windows image, which will be added later. 

See the
[examples/baiducloud](https://github.com/hashicorp/packer/tree/master/builder/baiducloud/examples)
folder in the Packer project for more examples.